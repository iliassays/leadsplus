<section class="page-agent-add container-fluid with-maxwidth">

    <div class="callout callout-danger" [hidden]="!errorReceived">
        <p>Not possible to create a new agent, please try later on.</p>
    </div>
    <form [formGroup]="newAgentForm" (ngSubmit)="submitForm(newAgentForm.value)" *ngIf="!isAgentProcessing && !isAgentProcessingComplete">
        <div class="row">
            <div class="col-6 form-group">
                <mat-form-field class="full-width">
                    <input matInput placeholder="First name" formControlName="firstname">
                </mat-form-field>
            </div>
            <div class="col-6 form-group">
                <mat-form-field class="full-width"> <input matInput placeholder="Last name" formControlName="lastname" /> </mat-form-field>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 form-group">
                <mat-form-field class="full-width"> <input matInput placeholder="Email" formControlName="email" /></mat-form-field>
            </div>
            <div class="col-lg-6 form-group">
                <mat-form-field class="full-width"> <input matInput placeholder="Phone" formControlName="phone" /></mat-form-field>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 form-group">
                <mat-form-field class="full-width" dividerColor="primary"> <input matInput placeholder="City" formControlName="city" /> </mat-form-field>
            </div>
            <div class="col-lg-6 form-group">
                <mat-form-field class="full-width" dividerColor="primary"> <input matInput placeholder="Country" formControlName="country" /> </mat-form-field>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 form-group">
                <mat-form-field class="full-width"> <input matInput placeholder="Company" formControlName="company" /></mat-form-field>
            </div>
            <div class="col-lg-6 form-group">
                <mat-form-field class="full-width"> <textarea matInput placeholder="Address" formControlName="address"></textarea></mat-form-field>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-lg-6">

            </div>
            <div class="col-lg-6 text-right">
                <button mat-raised-button class="btn-w-md" color="primary" type="submit" [disabled]="!newAgentForm.valid || isAgentProcessing">Save</button>
                <span class="space space-md"></span>
                <button mat-raised-button type="button" class="btn-w-md" (click)="returnToDetail()">Cancel</button>
            </div>
        </div>
    </form>

    <div *ngIf="isAgentProcessing">
        <div class="row" *ngIf="agentProcessingStatus.agent === 1">
            <div class="col-lg-12">
                <i class="fa fa-spinner fa-spin"></i> Creating agent....
            </div>
        </div>
        <div class="row" *ngIf="agentProcessingStatus.agent === 2">
            <div class="col-lg-12">
                <i class="fa fa-check"></i>  Agent created.
            </div>
        </div>
        <div class="row" *ngIf="agentProcessingStatus.agent === 3">
            <div class="col-lg-12">
                <i class="fa fa-warning"></i>  Agent creation failed.
            </div>
        </div>
        <div class="row" *ngIf="agentProcessingStatus.mailbox === 1">
            <div class="col-lg-12">
                <i class="fa fa-spinner fa-spin"></i> Creating mailbox....
            </div>
        </div>
        <div class="row" *ngIf="agentProcessingStatus.mailbox === 2">
            <div class="col-lg-12">
                <i class="fa fa-check"></i>  Mailbox created.
            </div>
        </div>
        <div class="row" *ngIf="agentProcessingStatus.mailbox === 3">
            <div class="col-lg-12">
                <i class="fa fa-warning"></i>  Mailbox creatation failed.
            </div>
        </div>
        <div class="row" *ngIf="agentProcessingStatus.typeform === 1">
            <div class="col-lg-12">
                <i class="fa fa-spinner fa-spin"></i> Creating typeform....
            </div>
        </div>
        <div class="row" *ngIf="agentProcessingStatus.typeform === 2">
            <div class="col-lg-12">
                <i class="fa fa-check"></i>  Typeform created.
            </div>
        </div>
        <div class="row" *ngIf="agentProcessingStatus.typeform === 3">
            <div class="col-lg-12">
                <i class="fa fa-warning"></i>  Typeform creation failed.
            </div>
        </div>
        <div class="row" *ngIf="agentProcessingStatus.spreadsheet === 1">
            <div class="col-lg-12">
                <i class="fa fa-spinner fa-spin"></i> Creating spreadsheet....
            </div>
        </div>
        <div class="row" *ngIf="agentProcessingStatus.spreadsheet === 2">
            <div class="col-lg-12">
                <i class="fa fa-check"></i>  Spreadsheet created.
            </div>
        </div>
        <div class="row" *ngIf="agentProcessingStatus.spreadsheet === 3">
            <div class="col-lg-12">
                <i class="fa fa-warning"></i>  Spreadsheet creatation failed.
            </div>
        </div>
    </div>
    <div *ngIf="isAgentProcessingComplete">
        <div class="callout callout-info" *ngIf="!isAgentProcessingCompleteWithError">Congratulation! Your agent has successfully created. <a [routerLink]="['detail']">Go to List</a></div>
        <div *ngIf="isAgentProcessingCompleteWithError" class="callout callout-warning">Congratulation! Your agent has successfully created. There is some error which you can manually fix it form agent list <a [routerLink]="['detail']">Go to List</a></div>
    </div>
    
</section>