<section class="page-agent-add container-fluid with-maxwidth">

    <div class="callout callout-danger" [hidden]="!errorReceived">
        <p>Not possible to create a new agent, please try later on.</p>
    </div>
    <form [formGroup]="newAgentForm" (ngSubmit)="submitForm(newAgentForm.value)" *ngIf="!isAgentProcessing && !isAgentProcessingComplete">
        <div class="row">
            <div class="col-6 form-group">
                <mat-form-field class="full-width">
                    <input matInput placeholder="First name" formControlName="firstname">
                </mat-form-field>
            </div>
            <div class="col-6 form-group">
                <mat-form-field class="full-width"> <input matInput placeholder="Last name" formControlName="lastname" /> </mat-form-field>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 form-group">
                <mat-form-field class="full-width"> <input matInput placeholder="Email" formControlName="email" /></mat-form-field>
            </div>
            <div class="col-lg-6 form-group">
                <mat-form-field class="full-width"> <input matInput placeholder="Phone" formControlName="phone" /></mat-form-field>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 form-group">
                <mat-form-field class="full-width" dividerColor="primary"> <input matInput placeholder="City" formControlName="city" /> </mat-form-field>
            </div>
            <div class="col-lg-6 form-group">
                <mat-form-field class="full-width" dividerColor="primary"> <input matInput placeholder="Country" formControlName="country" /> </mat-form-field>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 form-group">
                <mat-form-field class="full-width"> <input matInput placeholder="Company" formControlName="company" /></mat-form-field>
            </div>
            <div class="col-lg-6 form-group">
                <mat-form-field class="full-width"> <textarea matInput placeholder="Address" formControlName="address"></textarea></mat-form-field>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-lg-6">

            </div>
            <div class="col-lg-6 text-right">
                <button mat-raised-button class="btn-w-md" color="primary" type="submit" [disabled]="!newAgentForm.valid || isAgentProcessing">Save</button>
                <span class="space space-md"></span>
                <button mat-raised-button type="button" class="btn-w-md" (click)="returnToDetail()">Cancel</button>
            </div>
        </div>
    </form>

    <div *ngIf="isAgentProcessing">
        <div class="col-lg-12 callout callout-info" *ngIf="agentProcessingStatus.agent === 1">
            <i class="fa fa-spinner fa-spin"></i> Creating agent....
        </div>
        <div class="col-lg-12 callout callout-info" *ngIf="agentProcessingStatus.agent === 2">
            <i class="fa fa-check"></i>  Agent created.
        </div>
        <div class="col-lg-12 callout callout-warning" *ngIf="agentProcessingStatus.agent === 3">
            <i class="fa fa-warning"></i>  Agent creation failed.
        </div>
        <div class="col-lg-12 callout callout-info" *ngIf="agentProcessingStatus.mailbox === 1">
            <i class="fa fa-spinner fa-spin"></i> Creating mailbox....
        </div>
        <div class="col-lg-12 callout callout-info" *ngIf="agentProcessingStatus.mailbox === 2">
            <i class="fa fa-check"></i>  Mailbox created.
        </div>
        <div class="col-lg-12 callout callout-warning" *ngIf="agentProcessingStatus.mailbox === 3">
            <i class="fa fa-warning"></i>  Mailbox creatation failed.
        </div>
        <div class="col-lg-12 callout callout-info" *ngIf="agentProcessingStatus.typeform_buy === 1">
            <i class="fa fa-spinner fa-spin"></i> Creating typeform (Buy Inquiry)....
        </div>
        <div class="col-lg-12 callout callout-info" *ngIf="agentProcessingStatus.typeform_buy === 2">
            <i class="fa fa-check"></i>  Typeform (Buy Inquiry) created.
        </div>
        <div class="col-lg-12 callout callout-warning" *ngIf="agentProcessingStatus.typeform_buy === 3">
            <i class="fa fa-warning"></i> Buy Inquiry: Typeform creation failed.
        </div>
        <div class="col-lg-12 callout callout-info" *ngIf="agentProcessingStatus.spreadsheet_buy === 1">
            <i class="fa fa-spinner fa-spin"></i> Buy Inquiry: Creating spreadsheet....
        </div>
        <div class="col-lg-12 callout callout-info" *ngIf="agentProcessingStatus.spreadsheet_buy === 2">
            <i class="fa fa-check"></i> Buy Inquiry: Spreadsheet created.
        </div>
        <div class="col-lg-12 callout callout-warning" *ngIf="agentProcessingStatus.spreadsheet_buy === 3">
            <i class="fa fa-warning"></i> Buy Inquiry: Spreadsheet creatation failed.
        </div>

        <div class="col-lg-12 callout callout-info" *ngIf="agentProcessingStatus.typeform_rent === 1">
            <i class="fa fa-spinner fa-spin"></i> Rent Inquiry: Creating typeform....
        </div>
        <div class="col-lg-12 callout callout-info" *ngIf="agentProcessingStatus.typeform_rent === 2">
            <i class="fa fa-check"></i>  Rent Inquiry: Typeformcreated.
        </div>
        <div class="col-lg-12 callout callout-warning" *ngIf="agentProcessingStatus.typeform_rent === 3">
            <i class="fa fa-warning"></i>  Rent Inquiry: Typeform creation failed.
        </div>
        <div class="col-lg-12 callout callout-info" *ngIf="agentProcessingStatus.spreadsheet_rent === 1">
            <i class="fa fa-spinner fa-spin"></i> Rent Inquiry: Creating spreadsheet....
        </div>
        <div class="col-lg-12 callout callout-info" *ngIf="agentProcessingStatus.spreadsheet_rent === 2">
            <i class="fa fa-check"></i>  Rent Inquiry: Spreadsheetcreated.
        </div>
        <div class="col-lg-12 callout callout-warning" *ngIf="agentProcessingStatus.spreadsheet_rent === 3">
            <i class="fa fa-warning"></i>  Rent Inquiry: Spreadsheet creatation failed.
        </div>
    </div>
    <div *ngIf="isAgentProcessingComplete">
        <div class="callout callout-info" *ngIf="!isAgentProcessingCompleteWithError">Congratulation! Your agent has successfully created. <a [routerLink]="['../detail']">Go to List</a></div>
        <div *ngIf="isAgentProcessingCompleteWithError" class="callout callout-warning">Congratulation! Your agent has successfully created. There is some error which you can manually fix it form agent list <a [routerLink]="['../detail']">Go to List</a></div>
    </div>
    
</section>